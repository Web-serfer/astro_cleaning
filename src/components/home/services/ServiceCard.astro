---
import { Image } from 'astro:assets';
import { Icon } from 'astro-icon/components';
import placeholderImg from '@assets/home/placholder.png';

export interface Props {
    title?: string;
    description?: string;
    buttonText?: string;
    href?: string;
    iconType?: 'arrow' | 'external';
    promoTag?: string;
    details?: string[];
    }

const {
    title = "Service Title",
    description = "Service description goes here.",
    buttonText = "View Service",
    href = "#",
    iconType = "external",
    promoTag,
    details,
    } = Astro.props;
---

<div
        class="h-full w-full bg-violet-50 rounded-[48px] flex flex-col text-zinc-800 shadow-sm hover:shadow-md transition-shadow duration-300 hover:cursor-pointer p-6"
>

    <!-- Изображение -->
    <div class="relative h-1/2 group">
        <div class="w-full h-full overflow-hidden rounded-[24px]">
            <Image
                src={placeholderImg}
                alt={title}
                width={357}
                height={300}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
            />
        </div>

        <!-- Промо-тег -->
        {promoTag && (
                <span class="promo-tag absolute top-2 left-2 bg-white/90 backdrop-blur-sm text-violet-700 text-xs font-normal px-3 py-1 rounded-full border border-violet-200 opacity-0 group-hover:opacity-100 transition-all duration-300">
                {promoTag}
            </span>
        )}

        <!-- Иконка входа -->
        <div class="entry-icon absolute top-1 right-1 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300">
            <Icon name="externalLinkEnter" class="w-6 h-6 text-black" />
        </div>
    </div>

    <!-- Текст -->
    <div class="flex-grow flex flex-col h-1/2">
        <h3 class="text-xl font-semibold mt-6 text-black">{title}</h3>
        <p class="text-sm text-zinc-600 mt-4 flex-grow">{description}</p>

        <!-- Детали -->
        {details && details.length > 0 && (
                <div class="details-container flex flex-wrap gap-1.5 mb-4">
                    {details.map((detail) => (
                            <span class="text-xs font-medium text-zinc-500 border border-dashed border-zinc-400 rounded-[48px] px-2 py-1">
                        {detail}
                    </span>
                    ))}
                </div>
        )}

        <!-- Кнопка - Теперь это единственная ссылка -->
        <div class="mt-auto">
            <a href={href} class="block w-full text-center font-medium text-violet-700 border border-violet-300 rounded-full px-4 py-2.5 text-sm hover:bg-violet-100 transition-colors">
                {buttonText}
            </a>
        </div>
    </div>
</div>